[info] task=23 SID=20231205
[info] PAPER_HOME=/project/bdoiron/dracoxu/rct-fsflow/paper_project_final
[info] OUT_ROOT=/project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out
[info] DRY_RUN=0 CONTINUE_ON_ERROR=0

========== STIM 20ms sliding: train axes (C,R) peakbin ==========

[RUN] python cli/train_axes.py --out_root /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out --align stim --sid 20231205 --orientation vertical --features C R --tag axes_peakbin_stimCR-stim-vertical-20mssw --norm global --clf_binary logreg --C_grid 0.1 0.3 1 3 10 --lda_shrinkage auto --searchC --searchR --search_range_C=0.00:0.50 --search_range_R=0.00:0.50 --search_step_ms 20 --search_len_ms 50 100 150 200 250 --search_score_mode peak_bin_auc --search_tiebreak shortest_then_earliest --search_tol 0.01 --pt_min_ms_stim 200 --sliding_window_ms 20 --sliding_step_ms 10
[sliding-window] window=20.0ms (2 bins), step=10.0ms (1 bins), native=10.0ms
[20231205][SFEF] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/axes/axes_peakbin_stimCR-stim-vertical-20mssw/axes_SFEF.npz
    → winC_selected: [0.27999999999999997, 0.32999999999999996], score: 0.8627, peak@330ms (cv_auc=0.8727)
[20231205][SLIP] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/axes/axes_peakbin_stimCR-stim-vertical-20mssw/axes_SLIP.npz
    → winC_selected: [0.4400000000000001, 0.4900000000000001], score: 0.7285, peak@450ms (cv_auc=0.7365)
[20231205][SSC] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/axes/axes_peakbin_stimCR-stim-vertical-20mssw/axes_SSC.npz
    → winC_selected: [0.4400000000000001, 0.4900000000000001], score: 0.7334, peak@470ms (cv_auc=0.7579)
[ok] axes_summary.json → /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/axes/axes_peakbin_stimCR-stim-vertical-20mssw/axes_summary.json
[ok] config.json → /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/axes/axes_peakbin_stimCR-stim-vertical-20mssw/config.json

========== STIM 20ms sliding: QC ==========

[RUN] python cli/qc_axes.py --out_root /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out --align stim --sid 20231205 --orientation vertical --tag axes_peakbin_stimCR-stim-vertical-20mssw --thr 0.60 --k 5 --pt_min_ms_stim 200 --norm auto --sliding_window_ms 20 --sliding_step_ms 10
[sliding-window] window=20.0ms (2 bins), step=10.0ms (1 bins), native=10.0ms
[20231205][SFEF] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/qc/axes_peakbin_stimCR-stim-vertical-20mssw/qc_axes_SFEF.pdf (+ .png, .json)   lat(ms): C=130.00000268220901, Sraw=None, Sinv=None, T=None
[20231205][SLIP] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/qc/axes_peakbin_stimCR-stim-vertical-20mssw/qc_axes_SLIP.pdf (+ .png, .json)   lat(ms): C=359.99999940395355, Sraw=None, Sinv=None, T=None
[20231205][SSC] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/qc/axes_peakbin_stimCR-stim-vertical-20mssw/qc_axes_SSC.pdf (+ .png, .json)   lat(ms): C=439.9999976158142, Sraw=None, Sinv=None, T=None

========== STIM 20ms sliding: flow feature=C (save null) ==========

[RUN] python cli/flow_session.py --out_root /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out --align stim --sid 20231205 --feature C --orientation vertical --lags_ms 30 --ridge 1e-2 --perms 500 --perm-within CR --null_method trial_shuffle --standardize_mode none --pt_min_ms 200 --no_induced --evoked_subtract --evoked_sigma_ms 10 --axes_tag axes_peakbin_stimCR-stim-vertical-20mssw --tag evoked_peakbin_stimC_vertical_lag30ms_20mssw --flow_tag_base evoked_peakbin_stimC_vertical_lag30ms_20mssw --save_null_samples --norm auto --sliding_window_ms 20 --sliding_step_ms 10
[sliding-window] window=20.0ms (2 bins), step=10.0ms (1 bins), native=10.0ms
[20231205][SFEF->SLIP] [evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial/C/flow_C_SFEFtoSLIP.npz
[20231205][SFEF->SSC] [evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial/C/flow_C_SFEFtoSSC.npz
[20231205][SLIP->SFEF] [evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial/C/flow_C_SLIPtoSFEF.npz
[20231205][SLIP->SSC] [evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial/C/flow_C_SLIPtoSSC.npz
[20231205][SSC->SFEF] [evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial/C/flow_C_SSCtoSFEF.npz
[20231205][SSC->SLIP] [evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial/C/flow_C_SSCtoSLIP.npz

========== STIM 20ms sliding: flow feature=R (save null) ==========

[RUN] python cli/flow_session.py --out_root /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out --align stim --sid 20231205 --feature R --orientation vertical --lags_ms 30 --ridge 1e-2 --perms 500 --perm-within CR --null_method trial_shuffle --standardize_mode none --pt_min_ms 200 --no_induced --evoked_subtract --evoked_sigma_ms 10 --axes_tag axes_peakbin_stimCR-stim-vertical-20mssw --tag evoked_peakbin_stimR_vertical_lag30ms_20mssw --flow_tag_base evoked_peakbin_stimR_vertical_lag30ms_20mssw --save_null_samples --norm auto --sliding_window_ms 20 --sliding_step_ms 10
[sliding-window] window=20.0ms (2 bins), step=10.0ms (1 bins), native=10.0ms
[20231205][SFEF->SLIP] [evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial/R/flow_R_SFEFtoSLIP.npz
[20231205][SFEF->SSC] [evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial/R/flow_R_SFEFtoSSC.npz
[20231205][SLIP->SFEF] [evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial/R/flow_R_SLIPtoSFEF.npz
[20231205][SLIP->SSC] [evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial/R/flow_R_SLIPtoSSC.npz
[20231205][SSC->SFEF] [evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial/R/flow_R_SSCtoSFEF.npz
[20231205][SSC->SLIP] [evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/stim/20231205/flow/evoked_peakbin_stimR_vertical_lag30ms_20mssw-none-trial/R/flow_R_SSCtoSLIP.npz

========== SACC 20ms sliding: train axes (S) peakbin ==========

[RUN] python cli/train_axes.py --out_root /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out --align sacc --sid 20231205 --orientation horizontal --features S --tag axes_peakbin_saccS-sacc-horizontal-20mssw --norm global --clf_binary logreg --C_grid 0.1 0.3 1 3 10 --lda_shrinkage auto --searchS --search_range_S=-0.20:0.05 --search_step_ms 20 --search_len_ms 50 100 150 200 250 --search_score_mode peak_bin_auc --search_tiebreak shortest_then_closest0 --search_tol 0.01 --pt_min_ms_sacc 200 --sliding_window_ms 20 --sliding_step_ms 10
[sliding-window] window=20.0ms (4 bins), step=10.0ms (2 bins), native=5.0ms
[20231205][SFEF] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/axes/axes_peakbin_saccS-sacc-horizontal-20mssw/axes_SFEF.npz
[20231205][SLIP] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/axes/axes_peakbin_saccS-sacc-horizontal-20mssw/axes_SLIP.npz
[20231205][SSC] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/axes/axes_peakbin_saccS-sacc-horizontal-20mssw/axes_SSC.npz
[ok] axes_summary.json → /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/axes/axes_peakbin_saccS-sacc-horizontal-20mssw/axes_summary.json
[ok] config.json → /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/axes/axes_peakbin_saccS-sacc-horizontal-20mssw/config.json

========== SACC 20ms sliding: QC ==========

[RUN] python cli/qc_axes.py --out_root /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out --align sacc --sid 20231205 --orientation horizontal --tag axes_peakbin_saccS-sacc-horizontal-20mssw --thr 0.60 --k 5 --pt_min_ms_sacc 200 --norm auto --sliding_window_ms 20 --sliding_step_ms 10
[sliding-window] window=20.0ms (4 bins), step=10.0ms (2 bins), native=5.0ms
[20231205][SFEF] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/qc/axes_peakbin_saccS-sacc-horizontal-20mssw/qc_axes_SFEF.pdf (+ .png, .json)   lat(ms): C=None, Sraw=-119.99999918043613, Sinv=-119.99999918043613, T=None
[20231205][SLIP] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/qc/axes_peakbin_saccS-sacc-horizontal-20mssw/qc_axes_SLIP.pdf (+ .png, .json)   lat(ms): C=None, Sraw=-190.0000013411045, Sinv=-190.0000013411045, T=None
[20231205][SSC] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/qc/axes_peakbin_saccS-sacc-horizontal-20mssw/qc_axes_SSC.pdf (+ .png, .json)   lat(ms): C=None, Sraw=-10.000000009313226, Sinv=-10.000000009313226, T=None

========== SACC 20ms sliding: flow feature=S (save null) ==========

[RUN] python cli/flow_session.py --out_root /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out --align sacc --sid 20231205 --feature S --orientation horizontal --lags_ms 30 --ridge 1e-2 --perms 500 --perm-within CR --null_method trial_shuffle --standardize_mode none --pt_min_ms 200 --no_induced --evoked_subtract --evoked_sigma_ms 10 --axes_tag axes_peakbin_saccS-sacc-horizontal-20mssw --tag evoked_peakbin_saccS_horizontal_lag30ms_20mssw --flow_tag_base evoked_peakbin_saccS_horizontal_lag30ms_20mssw --save_null_samples --norm auto --sliding_window_ms 20 --sliding_step_ms 10
[sliding-window] window=20.0ms (4 bins), step=10.0ms (2 bins), native=5.0ms
[20231205][SFEF->SLIP] [evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/flow/evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial/S/flow_S_SFEFtoSLIP.npz
[20231205][SFEF->SSC] [evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/flow/evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial/S/flow_S_SFEFtoSSC.npz
[20231205][SLIP->SFEF] [evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/flow/evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial/S/flow_S_SLIPtoSFEF.npz
[20231205][SLIP->SSC] [evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/flow/evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial/S/flow_S_SLIPtoSSC.npz
[20231205][SSC->SFEF] [evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/flow/evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial/S/flow_S_SSCtoSFEF.npz
[20231205][SSC->SLIP] [evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial] wrote /project/bdoiron/dracoxu/rct-fsflow/paper_project_final/out/sacc/20231205/flow/evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial/S/flow_S_SSCtoSLIP.npz

[done] 20ms sliding window peakbin axes+QC+flow (SMALL LAGS) complete for SID=20231205

============================================================
20ms sliding window workflow (SMALL LAGS) completed. Next steps:
  1. Run trial_onset_comprehensive.py with:
     --sliding_window_ms_stim 20 --sliding_step_ms_stim 10 (for stim)
     --sliding_window_ms_sacc 20 --sliding_step_ms_sacc 10 (for sacc)
     and use axes_tag: axes_peakbin_stimCR-stim-vertical-20mssw or axes_peakbin_saccS-sacc-horizontal-20mssw
  2. Run summarize_flow_across_sessions.py with:
     --tags evoked_peakbin_stimC_vertical_lag30ms_20mssw-none-trial
     --tags evoked_peakbin_saccS_horizontal_lag30ms_20mssw-none-trial
     --smooth_ms 30  (can use smaller smooth since output is 10ms spaced)
  3. Run plot_qc_paper.py with 20mssw QC subdirs
============================================================
